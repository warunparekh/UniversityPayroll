@model List<UniversityPayroll.Models.SalaryStructure>
@{
    ViewData["Title"] = "Salary Structures";
}

<div id="react-root"></div>

<script>
    const salaryStructuresData = @Json.Serialize(Model);
    const e = React.createElement;

    const SalaryStructureTable = ({ structures }) => {
        return e('div', null,
            e('h2', null, 'Salary Structures'),
            e('p', null, 
                e('a', { href: "/SalaryStructure/Create", className: "btn btn-primary" }, 'New Structure')
            ),
            e('table', { className: "table table-striped" },
                e('thead', null,
                    e('tr', null, 
                        e('th', null, 'Designation'),
                        e('th', null, 'DA %'),
                        e('th', null, 'HRA %'),
                        e('th', null, 'Increment %'),
                        e('th', null, 'PF Emp %'),
                        e('th', null, 'PF Empr %'),
                        e('th', null, 'EDLI %'),
                        e('th', null, 'Actions')
                    )
                ),
                e('tbody', null,
                    structures.map(s => 
                        e('tr', { key: s.id },
                            e('td', null, s.designation),
                            e('td', null, s.allowances.daPercent),
                            e('td', null, s.allowances.hraPercent),
                            e('td', null, s.annualIncrementPercent),
                            e('td', null, s.pf.employeePercent),
                            e('td', null, s.pf.employerPercent),
                            e('td', null, s.pf.edliPercent),
                            e('td', null,
                                e('a', { href: `/SalaryStructure/Edit/${s.id}`, className: "btn btn-sm btn-secondary" }, 'Edit'),
                                e('form', { action: `/SalaryStructure/Delete/${s.id}`, method: 'post', onSubmit: (ev) => { if (!confirm('Delete this structure?')) ev.preventDefault(); } },
                                    e('button', { type: 'submit', className: "btn btn-sm btn-danger" }, 'Delete')
                                )
                            )
                        )
                    )
                )
            )
        );
    };


    ReactDOM.createRoot(document.getElementById('react-root')).render(e(SalaryStructureTable, { structures: salaryStructuresData }));
</script>
